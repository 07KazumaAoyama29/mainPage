{# templates/todo/partials/task_list_and_progress.html #}

{# --- プログレスバー --- #}
<div class="mb-4" id="progress-container">
  <h5>進捗 ({{ completed_tasks }} / {{ total_tasks }})</h5>
  <div class="progress">
    <div class="progress-bar" role="progressbar" style="width: {{ progress_percentage }}%;" aria-valuenow="{{ progress_percentage }}" aria-valuemin="0" aria-valuemax="100">
      {{ progress_percentage|floatformat:0 }}%
    </div>
  </div>
</div>

{# --- 新規タスク作成フォーム --- #}
<form method="post" action="{% url 'todo:schedule_detail' pk=schedule.pk %}" class="mb-4" id="add-task-form">
  {% csrf_token %}
  <div class="input-group">
    {{ form.title }}
    <button class="btn btn-primary" type="submit">タスクを追加</button>
  </div>
</form>

<div class="mt-4">
  <h4>タスクリスト</h4>
  
  {# ▼▼▼ このulタグからHTMX関連の属性を一旦すべて削除します ▼▼▼ #}
  <ul class="list-group" id="task-list">
    
    {% for task in tasks %}
      {% include 'todo/partials/task_item.html' with task=task %}
    {% endfor %}
  </ul>
</div>